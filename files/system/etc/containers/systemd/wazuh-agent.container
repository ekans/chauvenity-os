[Unit]
Description=Wazuh Agent
After=network-online.target
Wants=network-online.target

[Container]
Image=docker.io/wazuh/wazuh-agent:4.12.0
ContainerName=wazuh-agent

# Mount configuration and data
Volume=/var/ossec/etc:/var/ossec/etc:Z
Volume=/var/ossec/data:/var/ossec/data:Z
Volume=/var/ossec/logs:/var/ossec/logs:Z

# Network - host mode for agent communication
Network=host

# Environment variables for initial setup
Environment=WAZUH_MANAGER=your-manager-ip
Environment=WAZUH_AGENT_NAME=%H

# Run as root (required for security monitoring)
User=root

# Security options
SecurityLabelDisable=false

[Service]
Restart=always
TimeoutStartSec=900

[Install]
WantedBy=multi-user.target default.target
